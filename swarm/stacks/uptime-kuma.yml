# docker stack up -c uptime-kuma.yml kuma
version: "3.8"

services:
  kuma:
    image: louislam/uptime-kuma:latest
    deploy:
      restart_policy:
        condition: any
      placement:
        constraints:
          - "node.role==manager"
    ports:
      - target: 3001
        published: 80
        protocol: tcp
        mode: host
    volumes:
      - type: volume
        source: kumadata
        target: /app/data
    networks:
      - swarm-default
networks:
  swarm-default:
    external: true
volumes:
  kumadata:

# This stack will use an existing network created outside of the yaml.
# in this case, it's using one that is generated by visualizer.yml
